# BookStationのDBテーブルの話  

## 複合主キー  

informationテーブルを見ると 、主キー（primary key）が二つ存在する。  
→複合主キーという扱いになる  

どういうことかというと、以下のようにテーブルとデータがあったとする  
|Date(PK)|No(PK)|Content|
|-|-|-|
|2023-3-27|1|内容１|
|2023-3-27|2|内容２|
|2023-3-27|3|内容３|
|2023-3-28|1|内容４|
|2023-3-28|2|内容５|

Date列とNo列をPK（Primary Key）とした場合、これらを複合主キーと言い  
Date列とNo列の値両方を含んで一意になることが条件になる。なので以下のような場合はNGになる。  
|Date(PK)|No(PK)|Content|
|-|-|-|
|2023-3-27|1|内容１|
|2023-3-27|2|内容２|
|2023-3-27|2|内容３|
|2023-3-28|1|内容４|
|2023-3-28|1|内容５|


## なぜinformationテーブルに複合主キーがあるのか  

〇なぜ複合主キーがあるのか  
〇なぜ日付を主キーにしているのか  

答えを先に言うと  
**検索速度を上げるため**  

主キーを1つだけにした場合、必然的にNoが主キーとなるが問題が二つある  
①Noのデータ型がtinyintであるため、127を超えるとデータが登録出来なくなる  
②tinyintを使わなかったとしても、仮に10年このシステムが動いたとして、Noの値は無限に広がっていく  
 →データ検索に時間がかかる  

これらの問題があるため、日付けとNoを複合主キーにしたと考えられる。  

※データ検索に時間が掛かる理由はB木探索云々の話になって、ちょっと難しい（自分も分かってない,,,）  




